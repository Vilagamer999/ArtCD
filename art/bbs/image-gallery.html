<!DOCTYPE html>
<html>
<head>
  <title>Image Gallery</title>
  <style>
    .thumbnail {
      width: 200px;
      height: 200px;
      object-fit: cover;
      margin: 10px;
      cursor: pointer;
    }
    .expanded {
      max-width: 100%;
      max-height: 80vh;
    }
  </style>
</head>
<body>
  <h1>Image Gallery</h1>
  <label for="folder-select">Select a folder:</label>
  <select id="folder-select">
    <option value="">-- Select a folder --</option>
    <option value="0">0</option>
    <option value="A">A</option>
    <option value="B">B</option>
    <option value="C">C</option>
    <option value="D">D</option>
    <option value="E">E</option>
    <option value="F">F</option>
    <option value="G">G</option>
    <option value="L">L</option>
    <option value="M">M</option>
    <option value="NEW">NEW</option>
    <option value="O">O</option>
    <option value="P">P</option>
    <option value="Q">Q</option>
    <option value="R">R</option>
  </select>
  <div id="gallery"></div>
  <div id="expanded-view" style="display: none;">
    <img id="expanded-image" class="expanded" src="" alt="Expanded Image">
    <button id="back-button">Back to Gallery</button>
  </div>
  <script>
    const folderSelect = document.getElementById('folder-select');
    const gallery = document.getElementById('gallery');
    const expandedView = document.getElementById('expanded-view');
    const expandedImage = document.getElementById('expanded-image');
    const backButton = document.getElementById('back-button');

    folderSelect.addEventListener('change', async () => {
      const selectedFolder = folderSelect.value;
      if (selectedFolder) {
        const response = await fetch(`/${selectedFolder}`);
        const imageFiles = await response.json();
        gallery.innerHTML = '';
        imageFiles.forEach(file => {
          const img = document.createElement('img');
          img.src = `/${selectedFolder}/${file}`;
          img.classList.add('thumbnail');
          img.addEventListener('click', () => {
            expandedImage.src = img.src;
            gallery.style.display = 'none';
            expandedView.style.display = 'block';
          });
          gallery.appendChild(img);
        });
      }
    });

    backButton.addEventListener('click', () => {
      expandedView.style.display = 'none';
      gallery.style.display = 'grid';
    });
  </script>
</body>
</html>
